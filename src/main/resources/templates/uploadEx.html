<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

  <input name="uploadFiles" type="file" multiple>
  <button class="uploadBtn">Upload</button>

  <script
          src="https://code.jquery.com/jquery-3.5.1.min.js"
          integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
          crossorigin="anonymous"></script>

  <script>
      $('.uploadBtn').click(function(){                 // 화면에서 upload버튼 클릭하면
        var formData = new FormData();                  // 폼데이터 생성하고
        var inputFile = $("input[type='file']");
        var files = inputFile[0].files;
        for(var i=0; i<files.length; i++){
            console.log(files[i]);
            formData.append("uploadFiles", files[i]);   // 컨트롤러에 사용하는 uploadFiles 라는 이름으로 파일 데이터 추가
        }

        // 실제 업로드 부분
        // upload Ajax
        // 파일 업로드 위해 contentType 속성을 반드시 false로
        // 파일 업로드는 multipart/form-data 타입을 사용하기 위한 용도
        // 데이터타입은 json을 지정했지만, (현재 UploadController의 메서드는 어떠한 것도 변환하지 않음) -> 추후 수정 가능성
        $.ajax({
            url: '/uploadAjax',
            processData: false,
            contentType: false,
            data: formData,
            type: 'POST',
            dataType: 'json',
            success: function(result){
                console.log(result);                    // 나중에 회면 처리
            },
            error: function(jqXHR, textStatus, errorThrown){
                console.log(textStatus);
            }

        });                                             // $.ajax

      });

  </script>

</body>
</html>